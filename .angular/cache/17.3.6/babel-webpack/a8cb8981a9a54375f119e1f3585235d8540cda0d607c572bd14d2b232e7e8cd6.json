{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"../../services/maintenance.service\";\nimport * as i3 from \"../../services/params.service\";\nimport * as i4 from \"../../services/score-mail.service\";\nimport * as i5 from \"@angular/common\";\nimport * as i6 from \"@angular/forms\";\nconst _c0 = a0 => ({\n  \"show\": a0\n});\nfunction ScoreComponent_p_40_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate1(\" \", ctx_r1.maintenanceUrl.maintenance.case.status.name, \" \");\n  }\n}\nfunction ScoreComponent_ng_template_41_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\");\n    i0.ɵɵtext(1, \"En proceso\");\n    i0.ɵɵelementEnd();\n  }\n}\nexport let ScoreComponent = /*#__PURE__*/(() => {\n  class ScoreComponent {\n    constructor(route, _serMaint, _router, _paramsServ, _scoreMailService) {\n      this.route = route;\n      this._serMaint = _serMaint;\n      this._router = _router;\n      this._paramsServ = _paramsServ;\n      this._scoreMailService = _scoreMailService;\n      this.stars = 0;\n      this.mainDetalle = {\n        id: '',\n        date_estimated_delivery: '',\n        priority: '',\n        has_risk: false,\n        status_id: '',\n        user_to_assign_id: '',\n        solution: '',\n        institute_id: '',\n        type_incident: '',\n        site: '',\n        score: '',\n        description_incident: '',\n        name: ''\n      };\n      this.showInfo = false;\n      this.scoreModuleUrl = 'score';\n      this.token = localStorage.getItem('token');\n    }\n    ngOnInit() {\n      this.route.params.subscribe(params => {\n        this.maintId = params['maintId'];\n        console.log(this.maintId);\n        this.getDetail(this.maintId);\n        // this.params1();\n      });\n    }\n    getDetail(maintId) {\n      this._serMaint.detail(this.token, maintId).subscribe(resp => {\n        console.log(resp);\n        this.maintenanceUrl = resp;\n        console.log(this.maintenanceUrl);\n        if (this.maintenanceUrl && this.maintenanceUrl.maintenance) {\n          this.maintenance = this.maintenanceUrl.maintenance;\n          this.mainDetalle.id = this.maintenance.id;\n          this.mainDetalle.date_estimated_delivery = this.formatDate(this.maintenance.date_estimated_delivery);\n          this.mainDetalle.priority = this.maintenance.priority;\n          this.mainDetalle.has_risk = this.maintenance.has_risk;\n          this.mainDetalle.status_id = this.maintenance.case.status_id.toString(); // Convertir a string\n          this.mainDetalle.user_to_assign_id = this.maintenance.case.user_to_assign_id;\n          this.mainDetalle.institute_id = this.maintenance.case.institute_id.toString(); // Convertir a string\n          this.mainDetalle.solution = this.maintenance.solution;\n          this.mainDetalle.type_incident = this.maintenance.type_incident;\n          this.mainDetalle.site = this.maintenance.site;\n          this.mainDetalle.score = this.maintenance.score.toString(); // Convertir a string\n          this.mainDetalle.description_incident = this.maintenance.description_incident;\n        } else {\n          console.log('error');\n        }\n      });\n    }\n    formatDate(dateString) {\n      const date = new Date(dateString);\n      const day = String(date.getDate()).padStart(2, '0');\n      const month = String(date.getMonth() + 1).padStart(2, '0');\n      const year = date.getFullYear();\n      return `${year}-${month}-${day}`;\n    }\n    setRating(value) {\n      this.stars = value;\n      this.submitStars();\n    }\n    submitStars() {\n      this.mainDetalle.score = this.stars.toString();\n      const totalScore = {\n        maint_id: this.mainDetalle.id,\n        score: this.stars\n      };\n      this._serMaint.updateScore(this.token, totalScore).subscribe(resp => {\n        console.log(resp);\n      });\n    }\n    endStatus() {\n      this.mainDetalle.status_id = '9';\n      console.log(this.mainDetalle.status_id);\n      this._serMaint.update(this.token, this.mainDetalle).subscribe(resp => {\n        let respuesta = resp;\n        this._router.navigate(['/gratitude/']);\n      });\n    }\n    static #_ = this.ɵfac = function ScoreComponent_Factory(t) {\n      return new (t || ScoreComponent)(i0.ɵɵdirectiveInject(i1.ActivatedRoute), i0.ɵɵdirectiveInject(i2.MaintenanceService), i0.ɵɵdirectiveInject(i1.Router), i0.ɵɵdirectiveInject(i3.ParamsService), i0.ɵɵdirectiveInject(i4.ScoreMailService));\n    };\n    static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: ScoreComponent,\n      selectors: [[\"app-score\"]],\n      decls: 86,\n      vars: 28,\n      consts: [[\"Noentregado\", \"\"], [1, \"navbar\", \"navbar-expand-lg\", \"navbar-light\", \"bg-dark\"], [1, \"container-fluid\"], [\"href\", \"#\", 1, \"navbar-brand\"], [\"src\", \"assets/images/logo.png\", \"alt\", \"\", \"width\", \"100\", 1, \"d-inline-block\", \"align-text-top\"], [1, \"nav-link\", \"nav-links\", \"button-navbar\", \"text-light\", \"text-center\"], [1, \"container\", \"mt-3\"], [1, \"text-center\", \"bg-dark1\", \"bg-dark\"], [1, \"row\", \"mt-3\"], [1, \"row\", \"text-center\"], [1, \"col-lg-4\", \"card\"], [4, \"ngIf\", \"ngIfElse\"], [1, \"row\", \"mt-5\"], [1, \"col-lg-12\", \"text-center\"], [1, \"fa-solid\", \"fa-circle-info\", \"rating-info\", 3, \"mouseenter\", \"mouseleave\"], [1, \"rating\", \"d-flex\", \"justify-content-center\"], [1, \"rating-stars\"], [\"type\", \"radio\", \"id\", \"star1\", \"name\", \"rating\", \"value\", \"1\", 1, \"visually-hidden\", 3, \"ngModelChange\", \"click\", \"ngModel\"], [\"for\", \"star1\", 1, \"rating-icon\"], [1, \"fa-regular\", \"fa-star\"], [\"type\", \"radio\", \"id\", \"star2\", \"name\", \"rating\", \"value\", \"2\", 1, \"visually-hidden\", 3, \"ngModelChange\", \"click\", \"ngModel\"], [\"for\", \"star2\", 1, \"rating-icon\"], [\"type\", \"radio\", \"id\", \"star3\", \"name\", \"rating\", \"value\", \"3\", 1, \"visually-hidden\", 3, \"ngModelChange\", \"click\", \"ngModel\"], [\"for\", \"star3\", 1, \"rating-icon\"], [\"type\", \"radio\", \"id\", \"star4\", \"name\", \"rating\", \"value\", \"4\", 1, \"visually-hidden\", 3, \"ngModelChange\", \"click\", \"ngModel\"], [\"for\", \"star4\", 1, \"rating-icon\"], [\"type\", \"radio\", \"id\", \"star5\", \"name\", \"rating\", \"value\", \"5\", 1, \"visually-hidden\", 3, \"ngModelChange\", \"click\", \"ngModel\"], [\"for\", \"star5\", 1, \"rating-icon\"], [2, \"margin-top\", \"2rem\"], [3, \"ngSubmit\"], [1, \"btn-dark\"], [1, \"rating-notification\", 3, \"ngClass\"], [1, \"row\"], [1, \"col-lg-12\", \"mt-4\"], [\"routerLink\", \"/login\", 1, \"btn-dark\"]],\n      template: function ScoreComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          const _r1 = i0.ɵɵgetCurrentView();\n          i0.ɵɵelementStart(0, \"nav\", 1)(1, \"div\", 2)(2, \"a\", 3);\n          i0.ɵɵelement(3, \"img\", 4);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(4, \"a\", 5);\n          i0.ɵɵtext(5, \"Calificaci\\u00F3n del usuario\");\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵelementStart(6, \"div\", 6)(7, \"h1\", 7);\n          i0.ɵɵtext(8);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(9, \"div\", 8)(10, \"div\", 9)(11, \"div\", 10)(12, \"h2\");\n          i0.ɵɵtext(13, \"Creaci\\u00F3n:\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(14, \"p\");\n          i0.ɵɵtext(15);\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(16, \"div\", 10)(17, \"h2\");\n          i0.ɵɵtext(18, \"Fecha de entrega:\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(19, \"p\");\n          i0.ɵɵtext(20);\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(21, \"div\", 10)(22, \"h2\");\n          i0.ɵɵtext(23, \"Riesgo:\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(24, \"p\");\n          i0.ɵɵtext(25);\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵelementStart(26, \"div\", 9)(27, \"div\", 10)(28, \"h2\");\n          i0.ɵɵtext(29, \"Campus:\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(30, \"p\");\n          i0.ɵɵtext(31);\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(32, \"div\", 10)(33, \"h2\");\n          i0.ɵɵtext(34, \"Tipo de incidente:\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(35, \"p\");\n          i0.ɵɵtext(36);\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(37, \"div\", 10)(38, \"h2\");\n          i0.ɵɵtext(39, \"Estado:\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵtemplate(40, ScoreComponent_p_40_Template, 2, 1, \"p\", 11)(41, ScoreComponent_ng_template_41_Template, 2, 0, \"ng-template\", null, 0, i0.ɵɵtemplateRefExtractor);\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵelementStart(43, \"div\", 12)(44, \"div\", 13)(45, \"form\")(46, \"h2\");\n          i0.ɵɵtext(47, \"Califique el trabajo realizado del 1 al 5 \");\n          i0.ɵɵelementStart(48, \"i\", 14);\n          i0.ɵɵlistener(\"mouseenter\", function ScoreComponent_Template_i_mouseenter_48_listener() {\n            i0.ɵɵrestoreView(_r1);\n            return i0.ɵɵresetView(ctx.showInfo = true);\n          })(\"mouseleave\", function ScoreComponent_Template_i_mouseleave_48_listener() {\n            i0.ɵɵrestoreView(_r1);\n            return i0.ɵɵresetView(ctx.showInfo = false);\n          });\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(49, \"div\", 15)(50, \"div\", 16)(51, \"input\", 17);\n          i0.ɵɵtwoWayListener(\"ngModelChange\", function ScoreComponent_Template_input_ngModelChange_51_listener($event) {\n            i0.ɵɵrestoreView(_r1);\n            i0.ɵɵtwoWayBindingSet(ctx.stars, $event) || (ctx.stars = $event);\n            return i0.ɵɵresetView($event);\n          });\n          i0.ɵɵlistener(\"click\", function ScoreComponent_Template_input_click_51_listener() {\n            i0.ɵɵrestoreView(_r1);\n            return i0.ɵɵresetView(ctx.setRating(1));\n          });\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(52, \"label\", 18);\n          i0.ɵɵelement(53, \"i\", 19);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(54, \"input\", 20);\n          i0.ɵɵtwoWayListener(\"ngModelChange\", function ScoreComponent_Template_input_ngModelChange_54_listener($event) {\n            i0.ɵɵrestoreView(_r1);\n            i0.ɵɵtwoWayBindingSet(ctx.stars, $event) || (ctx.stars = $event);\n            return i0.ɵɵresetView($event);\n          });\n          i0.ɵɵlistener(\"click\", function ScoreComponent_Template_input_click_54_listener() {\n            i0.ɵɵrestoreView(_r1);\n            return i0.ɵɵresetView(ctx.setRating(2));\n          });\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(55, \"label\", 21);\n          i0.ɵɵelement(56, \"i\", 19);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(57, \"input\", 22);\n          i0.ɵɵtwoWayListener(\"ngModelChange\", function ScoreComponent_Template_input_ngModelChange_57_listener($event) {\n            i0.ɵɵrestoreView(_r1);\n            i0.ɵɵtwoWayBindingSet(ctx.stars, $event) || (ctx.stars = $event);\n            return i0.ɵɵresetView($event);\n          });\n          i0.ɵɵlistener(\"click\", function ScoreComponent_Template_input_click_57_listener() {\n            i0.ɵɵrestoreView(_r1);\n            return i0.ɵɵresetView(ctx.setRating(3));\n          });\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(58, \"label\", 23);\n          i0.ɵɵelement(59, \"i\", 19);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(60, \"input\", 24);\n          i0.ɵɵtwoWayListener(\"ngModelChange\", function ScoreComponent_Template_input_ngModelChange_60_listener($event) {\n            i0.ɵɵrestoreView(_r1);\n            i0.ɵɵtwoWayBindingSet(ctx.stars, $event) || (ctx.stars = $event);\n            return i0.ɵɵresetView($event);\n          });\n          i0.ɵɵlistener(\"click\", function ScoreComponent_Template_input_click_60_listener() {\n            i0.ɵɵrestoreView(_r1);\n            return i0.ɵɵresetView(ctx.setRating(4));\n          });\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(61, \"label\", 25);\n          i0.ɵɵelement(62, \"i\", 19);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(63, \"input\", 26);\n          i0.ɵɵtwoWayListener(\"ngModelChange\", function ScoreComponent_Template_input_ngModelChange_63_listener($event) {\n            i0.ɵɵrestoreView(_r1);\n            i0.ɵɵtwoWayBindingSet(ctx.stars, $event) || (ctx.stars = $event);\n            return i0.ɵɵresetView($event);\n          });\n          i0.ɵɵlistener(\"click\", function ScoreComponent_Template_input_click_63_listener() {\n            i0.ɵɵrestoreView(_r1);\n            return i0.ɵɵresetView(ctx.setRating(5));\n          });\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(64, \"label\", 27);\n          i0.ɵɵelement(65, \"i\", 19);\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵelementStart(66, \"p\", 28);\n          i0.ɵɵtext(67);\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(68, \"form\", 29);\n          i0.ɵɵlistener(\"ngSubmit\", function ScoreComponent_Template_form_ngSubmit_68_listener() {\n            i0.ɵɵrestoreView(_r1);\n            return i0.ɵɵresetView(ctx.endStatus());\n          });\n          i0.ɵɵelementStart(69, \"button\", 30);\n          i0.ɵɵtext(70, \"Finalizar Ticket\");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(71, \"div\", 31)(72, \"p\");\n          i0.ɵɵtext(73, \"1 Estrella: Mal servicio\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(74, \"p\");\n          i0.ɵɵtext(75, \"2 Estrellas: Regular\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(76, \"p\");\n          i0.ɵɵtext(77, \"3 Estrellas: Bueno\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(78, \"p\");\n          i0.ɵɵtext(79, \"4 Estrellas: Muy Bueno\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(80, \"p\");\n          i0.ɵɵtext(81, \"5 Estrellas: Excelente\");\n          i0.ɵɵelementEnd()()()();\n          i0.ɵɵelementStart(82, \"div\", 32)(83, \"div\", 33)(84, \"button\", 34);\n          i0.ɵɵtext(85, \"Realizar un nuevo ticket\");\n          i0.ɵɵelementEnd()()()();\n        }\n        if (rf & 2) {\n          const Noentregado_r3 = i0.ɵɵreference(42);\n          i0.ɵɵadvance(8);\n          i0.ɵɵtextInterpolate2(\"\", ctx.maintenanceUrl == null ? null : ctx.maintenanceUrl.maintenance.description_incident, \" en \", ctx.maintenanceUrl == null ? null : ctx.maintenanceUrl.maintenance.site, \"\");\n          i0.ɵɵadvance(7);\n          i0.ɵɵtextInterpolate(ctx.formatDate(ctx.maintenanceUrl == null ? null : ctx.maintenanceUrl.maintenance.case.created));\n          i0.ɵɵadvance(5);\n          i0.ɵɵtextInterpolate(ctx.formatDate(ctx.maintenanceUrl == null ? null : ctx.maintenanceUrl.maintenance.date_estimated_delivery));\n          i0.ɵɵadvance(5);\n          i0.ɵɵtextInterpolate((ctx.maintenance == null ? null : ctx.maintenance.has_risk) ? \"S\\u00ED\" : \"No\");\n          i0.ɵɵadvance(6);\n          i0.ɵɵtextInterpolate(ctx.maintenanceUrl == null ? null : ctx.maintenanceUrl.maintenance.case.institute);\n          i0.ɵɵadvance(5);\n          i0.ɵɵtextInterpolate(ctx.maintenanceUrl == null ? null : ctx.maintenanceUrl.maintenance.type_incident);\n          i0.ɵɵadvance(4);\n          i0.ɵɵproperty(\"ngIf\", (ctx.maintenanceUrl == null ? null : ctx.maintenanceUrl.maintenance.case.status.name) == \"ENTREGADO\")(\"ngIfElse\", Noentregado_r3);\n          i0.ɵɵadvance(11);\n          i0.ɵɵtwoWayProperty(\"ngModel\", ctx.stars);\n          i0.ɵɵadvance(2);\n          i0.ɵɵclassProp(\"fa-solid\", ctx.stars >= 1);\n          i0.ɵɵadvance();\n          i0.ɵɵtwoWayProperty(\"ngModel\", ctx.stars);\n          i0.ɵɵadvance(2);\n          i0.ɵɵclassProp(\"fa-solid\", ctx.stars >= 2);\n          i0.ɵɵadvance();\n          i0.ɵɵtwoWayProperty(\"ngModel\", ctx.stars);\n          i0.ɵɵadvance(2);\n          i0.ɵɵclassProp(\"fa-solid\", ctx.stars >= 3);\n          i0.ɵɵadvance();\n          i0.ɵɵtwoWayProperty(\"ngModel\", ctx.stars);\n          i0.ɵɵadvance(2);\n          i0.ɵɵclassProp(\"fa-solid\", ctx.stars >= 4);\n          i0.ɵɵadvance();\n          i0.ɵɵtwoWayProperty(\"ngModel\", ctx.stars);\n          i0.ɵɵadvance(2);\n          i0.ɵɵclassProp(\"fa-solid\", ctx.stars >= 5);\n          i0.ɵɵadvance(2);\n          i0.ɵɵtextInterpolate1(\"Estrellas: \", ctx.stars, \"\");\n          i0.ɵɵadvance(4);\n          i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction1(26, _c0, ctx.showInfo));\n        }\n      },\n      dependencies: [i5.NgClass, i5.NgIf, i1.RouterLink, i6.ɵNgNoValidate, i6.DefaultValueAccessor, i6.RadioControlValueAccessor, i6.NgControlStatus, i6.NgControlStatusGroup, i6.NgModel, i6.NgForm],\n      styles: [\"#form[_ngcontent-%COMP%]{width:250px;margin:0 auto;height:50px}#form[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{text-align:left}#form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:20px}.rating[_ngcontent-%COMP%]{display:flex;align-items:center}.rating-stars[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:.2rem;font-size:1.5rem;color:#ccc}.rating-stars[_ngcontent-%COMP%]   .fa-solid[_ngcontent-%COMP%]{color:#ffc107}.rating-icon[_ngcontent-%COMP%]{cursor:pointer}.rating-info[_ngcontent-%COMP%]{margin-left:.5rem;cursor:pointer;color:#007bff}.rating-notification[_ngcontent-%COMP%]{position:fixed;top:50%;right:-200px;transform:translateY(-50%);background-color:#343a40;color:#fff;padding:1rem;border-radius:.5rem;transition:right .3s ease-in-out;z-index:999}.rating-notification.show[_ngcontent-%COMP%]{right:1rem}.visually-hidden[_ngcontent-%COMP%]{position:absolute;left:-9999px;opacity:0}.fa-regular.fa-star[_ngcontent-%COMP%]{font-size:30px}.btn-dark[_ngcontent-%COMP%]{padding:10px;color:#fff;border:none;border-radius:10px;text-align:right}.btn-dark[_ngcontent-%COMP%]:hover{color:#ffc107;transform:scale(1.1);cursor:pointer;transition:.3s;font-weight:700}.bg-dark1[_ngcontent-%COMP%]{padding:10px;color:#ffc107;border:none;border-radius:10px;text-align:right;font-weight:700}\"]\n    });\n  }\n  return ScoreComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}