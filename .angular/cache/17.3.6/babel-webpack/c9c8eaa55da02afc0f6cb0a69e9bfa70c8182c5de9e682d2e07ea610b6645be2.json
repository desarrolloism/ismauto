{"ast":null,"code":"import Chart from 'chart.js/auto';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../services/cases.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"../../services/maintenance.service\";\nexport let MainComponent = /*#__PURE__*/(() => {\n  class MainComponent {\n    //muestra si es admin\n    // isAdmin: boolean = false;\n    constructor(_casesServ, _router, _mainServ) {\n      this._casesServ = _casesServ;\n      this._router = _router;\n      this._mainServ = _mainServ;\n      this.avatar = '';\n      this.name = '';\n      this.email = '';\n      this.last_name = '';\n      //variable quemada\n      this.percentage = 70;\n      this.token = localStorage.getItem('token');\n      this.getCases();\n      // this.getIsAdmin();\n    }\n    ngOnInit() {\n      this.generateChart1();\n      // this.generateChart2();\n      this.getAvatar();\n    }\n    //verifica si es admin o no\n    // getIsAdmin(){\n    //   this.isAdmin = JSON.parse(localStorage.getItem('isAdmin')|| 'false');\n    //   console.log(`es admin = ${this.isAdmin}`);\n    // }\n    //caputra los datos del usuario\n    getAvatar() {\n      const userData = JSON.parse(localStorage.getItem('userData') || '{}');\n      this.avatar = userData.avatar;\n      this.name = userData.first_name;\n      this.last_name = userData.last_name;\n      this.email = userData.email;\n      // console.log(this.avatar);\n      // console.log(this.name);\n      // console.log(this.last_name);\n      // console.log(this.email);\n    }\n    getCases() {\n      this._casesServ.casesAll(localStorage.getItem('token')).subscribe(response => {\n        this.responseApi = response;\n        if (this.responseApi.status == 'OK') {\n          this.responseCases = this.responseApi.cases;\n          this.responseTotals = this.responseApi.totals;\n          console.log(this.responseTotals);\n          // console.log(this.responseCases);\n          this.generateChart();\n        }\n      });\n    }\n    getTotalStatus() {\n      if (this.responseTotals && this.responseTotals.length > 0) {\n        const total = this.responseTotals.find(item => item.id === 4);\n        return total ? total.total_status : 0;\n      } else {\n        return 0;\n      }\n    }\n    //barras quemadas\n    generateChart1() {\n      const labels = ['1 Estrella', '2 Estrellas', '3 Estrellas', '4 Estrellas', '5 Estrellas'];\n      const data = [2, 4, 5, 8, 10]; // Datos ficticios para las barras\n      const colors = ['#ff9e18', '#ab0a3d', '#9e28b5', '#0a1f8f', '#65b2e8', '#898b8d', 'limegreen'];\n      this.chart = new Chart(\"MyOtherChart\", {\n        type: 'line',\n        data: {\n          labels: labels,\n          datasets: [{\n            label: \"\",\n            data: data,\n            backgroundColor: colors\n          }]\n        },\n        options: {\n          maintainAspectRatio: false,\n          // Desactiva el mantenimiento del aspecto para permitir un tamaño personalizado\n          responsive: true,\n          // Permite que el gráfico se ajuste al tamaño del contenedor\n          scales: {\n            y: {\n              beginAtZero: true\n            }\n          }\n        }\n      });\n    }\n    // generateChart2() {\n    //   const labels = ['INICIADO', 'SOLICITADO', 'EN PROCESO', 'EN ESPERA', 'ENTREGADO', 'FINALIZADO'];\n    //   const data = [5, 2, 4, 7, 3, 1]; // Datos ficticios para las barras\n    //   const colors = [\n    //     '#ff9e18',\n    //     '#ab0a3d',\n    //     '#9e28b5',\n    //     '#0a1f8f',\n    //     '#65b2e8',\n    //     '#898b8d',\n    //     'limegreen',\n    //   ];\n    //   this.chart = new Chart(\"MyOtherChart2\", { // Cambiado el ID a \"MyOtherChart\"\n    //     type: 'bar',\n    //     data: {\n    //       labels: labels,\n    //       datasets: [\n    //         {\n    //           label: \"\",\n    //           data: data,\n    //           backgroundColor: colors\n    //         }\n    //       ]\n    //     },\n    //     options: {\n    //       maintainAspectRatio: false, // Desactiva el mantenimiento del aspecto para permitir un tamaño personalizado\n    //       responsive: true, // Permite que el gráfico se ajuste al tamaño del contenedor\n    //       scales: {\n    //         y: {\n    //           beginAtZero: true\n    //         }\n    //       }\n    //     }\n    //   });\n    // }\n    //fin barras quemadas\n    generateChart() {\n      // console.log(this.responseTotals);\n      let aspectRatio = 2.5;\n      if (window.innerWidth < 576) {\n        // Por ejemplo, si el ancho de la ventana es menor que 576px (el punto de corte para dispositivos móviles en Bootstrap)\n        aspectRatio = 1.5; // Cambia el aspectRatio para dispositivos móviles\n      }\n      const labels = this.responseTotals.map(item => item.name);\n      const salesData = this.responseTotals.map(item => item.total_status);\n      // const profitData = this.responseTotals.map((item: any) => item.total_status);\n      const colors = ['#ff9e18', '#ab0a3d', '#9e28b5', '#0a1f8f', '#65b2e8', '#898b8d', 'limegreen'];\n      this.chart = new Chart(\"MyChart\", {\n        type: 'bar',\n        data: {\n          labels: labels,\n          datasets: [{\n            label: \"Total Casos\",\n            data: salesData,\n            backgroundColor: colors\n          }]\n        },\n        options: {\n          aspectRatio: aspectRatio,\n          //llama al evento click para redireccionar a otra ruta\n          onClick: (evt, activeElements) => {\n            if (activeElements.length > 0) {\n              // Obtener el índice del elemento seleccionado\n              const clickedIndex = activeElements[0].index;\n              // Obtener el nombre del elemento seleccionado\n              const selectedLabel = this.chart.data.labels[clickedIndex];\n              // Redirigir a la ruta deseada\n              this.redirectToRoute(selectedLabel);\n            }\n          }\n        }\n      });\n    }\n    // Método para redirigir a otra ruta según el elemento seleccionado\n    redirectToRoute(selectedLabel) {\n      // Aquí puedes hacer lo que necesites con la etiqueta seleccionada antes de redirigir\n      console.log('Elemento seleccionado:', selectedLabel);\n      // Redirigir a la ruta deseada, por ejemplo:\n      this._router.navigate(['/cases', selectedLabel]);\n    }\n    logout() {\n      if (window.confirm('¿Está seguro de que desea salir?')) {\n        localStorage.clear();\n        this._router.navigate(['/login']);\n      }\n    }\n    static #_ = this.ɵfac = function MainComponent_Factory(t) {\n      return new (t || MainComponent)(i0.ɵɵdirectiveInject(i1.CasesService), i0.ɵɵdirectiveInject(i2.Router), i0.ɵɵdirectiveInject(i3.MaintenanceService));\n    };\n    static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: MainComponent,\n      selectors: [[\"app-main\"]],\n      decls: 41,\n      vars: 3,\n      consts: [[1, \"navbar\", \"navbar-expand-lg\", \"navbar-light\", \"bg-dark\"], [1, \"container-fluid\"], [\"href\", \"#\", 1, \"navbar-brand\"], [\"src\", \"assets/images/logo.png\", \"alt\", \"\", \"width\", \"100\", 1, \"d-inline-block\", \"align-text-top\"], [1, \"user\"], [1, \"fa-regular\", \"fa-circle-user\"], [1, \"exit\", 3, \"click\"], [1, \"fa-solid\", \"fa-door-open\"], [1, \"container-fluid\", \"mt-2\"], [1, \"row\", \"bodychart\"], [1, \"col-md-2\", \"col-lg-2\", \"card-nav\", \"sidebar\", \"text-center\", \"active\"], [1, \"card\", \"shadow\", \"menu\"], [1, \"nav\", \"flex-column\"], [1, \"procesos__menu\"], [\"href\", \"/list\", 1, \"procesos__menu--option\"], [\"href\", \"#\", 1, \"procesos__menu--option\"], [\"role\", \"main\", 1, \"col-md-10\", \"col-lg-10\", \"ml-sm-auto\", \"px-4\"], [1, \"row\"], [1, \"col-md-12\"], [1, \"card\", \"shadow\", \"overflow-auto\", \"stats\"], [1, \"card-body\"], [1, \"card\", \"shadow\", \"menu\", \"text-center\"], [1, \"fa-solid\", \"fa-chart-line\"], [1, \"chart-container\"], [\"id\", \"MyChart\", \"width\", \"300\", \"height\", \"300\"]],\n      template: function MainComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"nav\", 0)(1, \"div\", 1)(2, \"a\", 2);\n          i0.ɵɵelement(3, \"img\", 3);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(4, \"a\", 4);\n          i0.ɵɵelement(5, \"i\", 5);\n          i0.ɵɵtext(6);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(7, \"a\", 6);\n          i0.ɵɵlistener(\"click\", function MainComponent_Template_a_click_7_listener() {\n            return ctx.logout();\n          });\n          i0.ɵɵelement(8, \"i\", 7);\n          i0.ɵɵtext(9, \" Salir\");\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵelementStart(10, \"div\", 8)(11, \"div\", 9)(12, \"nav\", 10)(13, \"h4\", 11);\n          i0.ɵɵtext(14, \"PROCESOS\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(15, \"ul\", 12)(16, \"li\", 13)(17, \"a\", 14);\n          i0.ɵɵtext(18);\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(19, \"li\", 13)(20, \"a\", 15);\n          i0.ɵɵtext(21, \"Opci\\u00F3n 2\");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(22, \"li\", 13)(23, \"a\", 15);\n          i0.ɵɵtext(24, \"Opci\\u00F3n 3\");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(25, \"li\", 13)(26, \"a\", 15);\n          i0.ɵɵtext(27, \"Opci\\u00F3n 4\");\n          i0.ɵɵelementEnd()()()();\n          i0.ɵɵelementStart(28, \"main\", 16)(29, \"div\", 17)(30, \"div\", 18)(31, \"div\", 19)(32, \"div\", 20)(33, \"div\", 21)(34, \"div\")(35, \"p\");\n          i0.ɵɵelement(36, \"i\", 22);\n          i0.ɵɵtext(37);\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵelementStart(38, \"div\", 17)(39, \"div\", 23);\n          i0.ɵɵelement(40, \"canvas\", 24);\n          i0.ɵɵelementEnd()()()()()()()()();\n        }\n        if (rf & 2) {\n          i0.ɵɵadvance(6);\n          i0.ɵɵtextInterpolate1(\" Bienvenido, \", ctx.avatar, \"\");\n          i0.ɵɵadvance(12);\n          i0.ɵɵtextInterpolate1(\"Mantenimiento \", ctx.responseCases == null ? null : ctx.responseCases.length, \"\");\n          i0.ɵɵadvance(19);\n          i0.ɵɵtextInterpolate1(\" Estad\\u00EDsticas totales (\", ctx.responseCases == null ? null : ctx.responseCases.length, \")\");\n        }\n      },\n      styles: [\"[_ngcontent-%COMP%]:root{--primario: #f9f9f9;--secundario: #f2f2f2;--negro: black}.label-color[_ngcontent-%COMP%]{color:#ffc107}.navbar-nav-small[_ngcontent-%COMP%]{display:none}@media (max-width: 767px){.navbar-nav-small[_ngcontent-%COMP%]{display:flex;align-items:center;margin-top:10px}}nav[_ngcontent-%COMP%]{margin:0 0 2rem}.nav-item[_ngcontent-%COMP%]{font-size:1.2rem;font-weight:700}.card[_ngcontent-%COMP%]{border:1px solid #ccc;border-radius:4px;box-shadow:0 4px 8px #0000001a;padding:10px;background-color:#fff}.mycard[_ngcontent-%COMP%]{font-size:1.3rem;font-weight:600;text-align:center}.administrar[_ngcontent-%COMP%]{text-align:center}.administrar[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{fill:none;stroke-width:1.5;stroke-linecap:round;stroke-linejoin:round}.administrar[_ngcontent-%COMP%]   b[_ngcontent-%COMP%]{color:#000;font-weight:700;font-size:18px}.chart-container[_ngcontent-%COMP%]{width:100%;overflow-x:auto}.tickets[_ngcontent-%COMP%]{font-size:1rem;font-weight:700;text-decoration:none;color:var(--negro);list-style-type:none}h1[_ngcontent-%COMP%]{text-align:center;font-weight:700;font-size:2rem}.nav-links[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700}a.navbar-brand[_ngcontent-%COMP%]{color:#000}a.nav-link[_ngcontent-%COMP%]{font-size:1.2rem;margin-right:5rem;cursor:pointer}a.nav-link[_ngcontent-%COMP%]:hover{background-color:#ffc107;border-radius:5px;transition:all .3s ease;padding:1rem}.cont[_ngcontent-%COMP%]{padding:0 2rem}.band-link[_ngcontent-%COMP%]{background-color:#ffc107;border-radius:5px;transition:all .3s ease;padding:1rem;animation:_ngcontent-%COMP%_vibrar .5s;cursor:default}@keyframes _ngcontent-%COMP%_vibrar{0%{transform:translate(0)}20%{transform:translate(-2px) rotate(-1deg)}40%{transform:translate(2px) rotate(1deg)}60%{transform:translate(-2px) rotate(-1deg)}80%{transform:translate(2px) rotate(1deg)}to{transform:translate(0)}}a[_ngcontent-%COMP%]{text-decoration:none}.procesos[_ngcontent-%COMP%]{font-size:1rem;color:#000;border:none;margin-top:10px;border:1px solid #ccc}.overflow-auto[_ngcontent-%COMP%]{scrollbar-width:thin;scrollbar-color:rgba(0,0,0,.3) rgba(0,0,0,.1);-ms-overflow-style:-ms-autohiding-scrollbar}.overflow-auto[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background-color:#0000004d}.overflow-auto[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background-color:#00000080}.overflow-auto[_ngcontent-%COMP%]::-webkit-scrollbar-track{background-color:#0000001a}.ticket-caso[_ngcontent-%COMP%]{text-transform:lowercase;font-weight:400;margin-top:5px}.list-group[_ngcontent-%COMP%]{text-align:left}.rounded-pill[_ngcontent-%COMP%]{background-color:#ffc107;color:#000}.card-title[_ngcontent-%COMP%]{font-size:1.3rem;font-weight:400}.card-text[_ngcontent-%COMP%]{font-weight:400}.menu[_ngcontent-%COMP%]{font-size:.8rem;border-radius:5px;width:100%;border:1px solid #ffc107;color:#ffc107}.procesos__menu[_ngcontent-%COMP%]{margin-top:10px}.procesos__menu--option[_ngcontent-%COMP%]{color:#828282}.procesos__menu[_ngcontent-%COMP%]:not(:last-child){border-bottom:1px solid #ccc;padding-bottom:2px;margin-bottom:2px}.stats[_ngcontent-%COMP%]{height:600px}.card-sep[_ngcontent-%COMP%]{margin-top:1rem}.card-sep__footer[_ngcontent-%COMP%]{margin-top:10px}.custom-number[_ngcontent-%COMP%]{margin-left:-10px;margin-right:-10px;font-size:2rem}.card-nav[_ngcontent-%COMP%]{padding:10px;border-radius:5px}.user[_ngcontent-%COMP%]{border:1px solid #ffc107;padding:1rem;border-radius:5px;font-size:1.2rem;color:#ffc107}.exit[_ngcontent-%COMP%]{border:1px solid white;padding:1rem;border-radius:5px;font-size:1.2rem;color:#fff;cursor:pointer}.exit[_ngcontent-%COMP%]:hover{transform:scale(1.1);animation:.3s}\"]\n    });\n  }\n  return MainComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}